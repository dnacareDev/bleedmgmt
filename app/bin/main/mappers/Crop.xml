<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.digitalresource.Mapper.CropMapper">
    <insert id="registCrop" parameterType="Crop">
        INSERT INTO crop(
            category_id,
            crop_name,
            create_date
        )
        VALUES (
            #{category_id},
            #{crop_name},
            SYSDATE()
        )
    </insert>

    <select id="selectCropList" resultType="Crop">
        SELECT * FROM crop;
    </select>

    <select id="selectCropListByResourceName" parameterType="int" resultType="Crop">
        SELECT * FROM crop c JOIN resource r on c.crop_id = r.crop_id
        WHERE r.resource_name_id = #{resource_name_id}
    </select>

    <delete id="deleteCropById" parameterType="int">
        DELETE FROM crop WHERE crop_id = #{crop_id}
    </delete>

    <delete id="deleteCropByCategory" parameterType="int">
        DELETE FROM crop WHERE category_id = #{category_id}
    </delete>

    <select id="selectCropByCategory" parameterType="int" resultType="Crop">
        SELECT * FROM crop WHERE category_id = #{category_id}
    </select>

    <select id="checkDuplicateCropName" parameterType="String" resultType="int">
        SELECT COUNT(*) from crop WHERE crop_name = #{crop_name}
    </select>

    <select id="SelectCropById" resultType="String">
        SELECT * FROM crop WHERE crop_id = #{crop_id}
    </select>

    <select id="SearchCropList" resultType="Crop">
        select c.* from resource r
        inner join resource_name rn on r.resource_name_id = rn.resource_name_id
        inner join crop c on c.crop_id = r.crop_id where rn.resource_name = #{type};
    </select>

</mapper>