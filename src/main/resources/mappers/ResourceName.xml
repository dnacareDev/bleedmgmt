<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.digitalresource.Mapper.ResourceNameMapper">
    <select id="getCountResourceNameByCrop" resultType="int" parameterType="map">
        SELECT COUNT(*)
        FROM resource_name name JOIN resource r ON name.resource_name_id = r.resource_name_id
        JOIN crop c on r.crop_id = c.crop_id
        WHERE c.crop_id = #{crop_id}
        AND name.resource_name = #{resource_name}
    </select>

<!--    이름으로 자원 관리 이름 찾기-->
    <select id="selectResourceName" parameterType="String" resultType="ResourceName">
        SELECT * FROM resource_name WHERE resource_name = #{resource_name}
    </select>

<!--    자원 관리 이름 생성-->
    <insert id="registResourceName" parameterType="ResourceName" useGeneratedKeys="true" keyProperty="resource_name_id">
        INSERT INTO resource_name(
            resource_name
        )
        VALUE(
            #{resource_name}
        )
    </insert>

<!--    자원 관리 삭제시 사용되는 자원관리 이름이 더 이상 없는 경우 삭제-->
    <delete id="deleteResourceName" parameterType="int">
        DELETE FROM resource_name
        WHERE resource_name_id = #{resource_name_id}
    </delete>
</mapper>