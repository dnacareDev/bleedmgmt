<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.digitalresource.Mapper.BreedMapper">
    <insert id="insertBreed" useGeneratedKeys="true" keyProperty="breed_id">
    	insert into breed (resource_id, create_date, variety_name)
    	select #{resource_id}, now(), (select crop_name from crop c inner join resource r on c.crop_id = r.crop_id where r.resource_id = #{resource_id})
    </insert>

	<insert id="insertStandard">
    	insert into standard (breed_id, detail_id, standard_data)
    	values (#{breed_id}, #{detail_id}, #{standard_data})
    </insert>
</mapper>